<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Google Fonts loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;400;700&display=swap" rel="stylesheet"> 
  <title>GSAP Trial__ADVANCE SAMPLE 04 Stagger</title>
</head>
<body>
<main>

<a href="/">戻る</a>

<h1>GSAPのスタンダードな機能を用いた簡単なアニメーション 応用編3</h1>

<article>

  <section>
    <h2>Staggerに詳細な指定を行う オブジェクト指定 2</h2>
    <p>
      staggerパラメータへオブジェクトで指定を行うことで、アニメーションを細かく指定することができます。<br/>
      オブジェクト内には下記のプロパティを指定することができます。
    </p>

    <!-- 
      grid 
    -->
    <section>
      <h3>grid</h3>
      <p>
        gridプロパティには配列指定と、定型値"auto"を指定できます。<br/>
        要素の列がグリッド型に(整理された状態で)表示されている場合、"grid"プロパティへ幾つの行と列があるのかを(以下の様に)示すことで、
        GSAPはその指定に応じて近接度合い(gridトゥイーン開始位置=起点)を計算することができます。
        <br/>
        もしくは、grid:"auto" を使用することで、GSAPは要素の絶対座標位置を取得する 
        <a href="https://developer.mozilla.org/ja/docs/Web/API/Element/getBoundingClientRect" target="_blank">element.getBoundingClientRect()</a>
        関数を使用して行と列を自動的に計算します。(要素の並び方が固定でないときがある場合=レスポンシブレイアウト に最適) <br/>
        もしも要素の列が整ったグリッドに配置されていない場合(ランダムであったり、不均一な配置の場合)には、
        <a href="https://codepen.io/GreenSock/pen/gyWrPO?editors=0010" target="_blank">distributeByPosition()ヘルパー関数</a>
        が用意されているので、参考にしてみてください。
      </p>
      <pre>
        Example...
        grid:[9,15]</pre>
      <div class="element__parent grid">
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>

        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>

        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>

        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>

        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
        <div class="rect">grid : "auto"</div>
      </div>

    </section>

    <!-- 
      axis 
    -->
    <section>
      <h3>axis</h3>
      <p>
        axisプロパティには string値 "x"と"y" を指定することができます。<br/>
        gridプロパティを定義したとき、
        スタッガートゥイーンの伝播方向は
        from プロパティに指定されている(あるいはデフォルトの"start"の) x軸とy軸 の合計距離に基づきます。
        (何も指定が無ければ起点から放射状にトゥイーンが広がります)
        <br/>
        axisプロパティを使用することで、x(横方向)、y(縦方向)のどちらか片方の軸に絞って
        スタッガートゥイーンの伝播方向を指定することができます。

        <br/>
        以下のデモは、上述(grid)のデモに axis:"x" を追加しています。
      </p>
      <pre>
        {
          stagger: {
            axis: "x",
          }
        }</pre>
      <div class="element__parent axis_x">
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>

        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>

        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
        <div class="rect">axis : "x"</div>
      </div>
      <p>
        以下のデモは、上述(grid)のデモに axis:"y" を追加しています。
      </p>
      <pre>
        {
          stagger: {
            axis: "y",
          }
        }</pre>
      <div class="element__parent axis_y">
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>

        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>

        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
        <div class="rect">axis : "y"</div>
      </div>

    </section>

    <!-- 
      ease 
    -->
    <section>
      <h3>ease</h3>
      <p>
        "ease" プロパティには定型値、関数を指定することができます。<br/>
        easeプロパティに指定された内容によって、各要素のトゥイーンの開始タイミング(伝播していくタイミング)が
        変化します。
        <br/>
        例えば "power2.out" を指定した場合、適用要素列の序盤でのトゥイーン伝播が緩やかになり(イージングの最初の緩いカーブ)、
        後半に向かうにつれてよりタイトな伝播となります。
        <br/>
        指定方法は通常のイージング指定と同じです。(最初が小文字な点に注意) "power2.out" ← こんな感じ。
        <br/>
        デフォルトは"none"です。
      </p>
      <p>ease:"power2.out"</p>
      <pre>
        {
          stagger: {
            ease: "power2.out",
          }
        }</pre>
      <div class="element__parent easeOne">
        <div class="rect">ease: "power2.out"</div>
        <div class="rect">ease: "power2.out"</div>
        <div class="rect">ease: "power2.out"</div>
        <div class="rect">ease: "power2.out"</div>
        <div class="rect">ease: "power2.out"</div>
        <div class="rect">ease: "power2.out"</div>
        <div class="rect">ease: "power2.out"</div>
        <div class="rect">ease: "power2.out"</div>
      </div>
      <p>ease:"slow"</p>
      <pre>
        {
          stagger: {
            ease: "slow",
          }
        }</pre>
      <div class="element__parent easeTwo">
        <div class="rect">ease: "slow"</div>
        <div class="rect">ease: "slow"</div>
        <div class="rect">ease: "slow"</div>
        <div class="rect">ease: "slow"</div>
        <div class="rect">ease: "slow"</div>
        <div class="rect">ease: "slow"</div>
        <div class="rect">ease: "slow"</div>
        <div class="rect">ease: "slow"</div>
      </div>
    </section>

    <!-- 
      repeat
    -->
    <section>
      <h3>repeat</h3>
      <p>
        Staggerのオブジェクト指定内に repeat を使用すると、
        トゥイーンを指定している要素配列全体のStaggerアニメーション終了を待つことなく、
        個別の要素単位でトゥイーンを直ぐにリピートします。
      </p>
      <h4>シークエンス全体を繰り返す</h4>
      <p>
        普通に
        staggerプロパティと同階層に repeat を指定した場合、
        (例えば gsap.to(... {repeat:-1, stagger:{...}) といった感じ)
        全てのサブトゥイーンが終了するのを待って、再びトゥイーンの(全ての)シーケンスを繰り返します(=repeat します)。
      </p>
      <h4>トゥイーンさせた要素自体のを繰り返し</h4>
      <p>
        シークエンス全体の終了とその繰り返しが発火するのを待たずに、
        それぞれのサブトゥイーンをリピートさせたい場合
        (それぞれの要素自身のトゥイーンが完了次第すぐに繰り返したい場合)は、
        repeat:true, repeat:-1 を
        staggerオブジェクト設定の内側に(トップレベルのrepeatが既にあっても、ネストして)設定するだけです。
        (yoyoの設定も同じく指定できます)
      </p>
      <p>
        スタッガーのオブジェクト指定内に設置することは、個々の要素に対して発火させることになります。
        <br/>
        同じことがコールバック関数にも当てはまります。（トゥイーンのタイミングに合わせて処理を行う onUpdate, onComplete, onStartなど）
        <br/>
        スタッガーのオブジェクト指定は、個々の要素のサブトゥイーンに対して指定しているのとほぼ同じと考えると良いでしょう。
      </p>
      <pre>
        // 普通に repeat
        gsap.to(
          hoge,
          {
            ...,
            repeat:-1,
            stagger:{
            }
          }
        );

        // ネストさせて 間をおかずに repeat
        gsap.to(
          hoge,
          {
            ...,
            stagger:{
              repeat:-1,
            }
          }
        );</pre>
      <!--
        put "repeat" in top level
      -->
      <h4 style="margin-top:2rem">トップレベルにrepeatを配置した場合</h4>
      <p>全てのトゥイーンが終了後に、リピートする。</p>
      <pre>
        repeat: 8,
        stagger: {
          ...
        }</pre>
      <div class="element__parent topLevelRepeat">
        <div class="rect">repeat:true, stagger{ }</div>
        <div class="rect">repeat:true, stagger{ }</div>
        <div class="rect">repeat:true, stagger{ }</div>
        <div class="rect">repeat:true, stagger{ }</div>
        <div class="rect">repeat:true, stagger{ }</div>
        <div class="rect">repeat:true, stagger{ }</div>
        <div class="rect">repeat:true, stagger{ }</div>
        <div class="rect">repeat:true, stagger{ }</div>
      </div>

      <!--
        put "repeat" inner object set
      -->
      <h4>staggerのオブジェクト指定に repeat を設定した場合</h4>
      <p>全てのトゥイーンが終了する前にリピートを始める。</p>
      <pre>
        repeat: 8,
        stagger: {
          ...
          repeat: -1,
        }</pre>
      <div class="element__parent objectRepeat">
        <div class="rect">stagger{ repeat:8, yoyo:true }</div>
        <div class="rect">stagger{ repeat:8, }</div>
        <div class="rect">stagger{ repeat:8, }</div>
        <div class="rect">stagger{ repeat:8, }</div>
        <div class="rect">stagger{ repeat:8, }</div>
        <div class="rect">stagger{ repeat:8, }</div>
        <div class="rect">stagger{ repeat:8, }</div>
        <div class="rect">stagger{ repeat:8, }</div>
      </div>

      <!--
        set with "yoyo"
      -->
      <h4>staggerのオブジェクト指定に repeat と yoyo を同時に設定した場合</h4>
      <p>全てのトゥイーンが終了する間に各要素に yoyo が適用される。<br/>
      そして全てのトゥイーンが終了する前にリピートを始める。</p>
      <pre>
        repeat: 8,
        stagger: {
          ...
          repeat: -1,
          yoyo:true,
        }</pre>
      <div class="element__parent objectRepeatYoyo">
        <div class="rect">stagger: function</div>
        <div class="rect">stagger{ repeat:-1, yoyo:true }</div>
        <div class="rect">stagger{ repeat:-1, yoyo:true }</div>
        <div class="rect">stagger{ repeat:-1, yoyo:true }</div>
        <div class="rect">stagger{ repeat:-1, yoyo:true }</div>
        <div class="rect">stagger{ repeat:-1, yoyo:true }</div>
        <div class="rect">stagger{ repeat:-1, yoyo:true }</div>
        <div class="rect">stagger{ repeat:-1, yoyo:true }</div>
      </div>

    </section>

  </section>


</article>


<p>
  <a href="../sample05/index.html">次へ</a>
</p>


</main>


<script type="module" src="./index.js" defer></script>

</body>
</html>